# ══════════════════════════════════════════════════════════════════════════════
# LOGIC_00_INDEX.yaml
# ══════════════════════════════════════════════════════════════════════════════

meta:
  owner: "AI Opener"
  version: "2.0.0"
  last_updated: "2025-12-11"
  purpose: "Boot sequence, file map, and auto-inheritance rules (SSOT)"
  notes: "v2.0 - RAC 2.0 architecture with 11-layer load order"
  tags: [logic, index, boot, ssot]

# ══════════════════════════════════════════════════════════════════════════════
# BOOT SEQUENCE
# ══════════════════════════════════════════════════════════════════════════════

boot_sequence:
  - CONFIG
  - DEMO
  - LOGIC
  - OPS
  - ROLES
  - PACKS
  - LIBRARIES
  - USE_CASES
  - WORKFLOWS
  - ORG
  - CLIENT

# ══════════════════════════════════════════════════════════════════════════════
# AUTO-INHERITANCE RULES (SSOT)
# ══════════════════════════════════════════════════════════════════════════════
# These dependencies are automatically inherited by ALL layers.
# Layers do NOT need to declare base_dependencies explicitly.
# Only declare dependencies if OVERRIDING the base.

auto_inheritance:
  description: "All layers automatically inherit from LOGIC_02_RETRIEVAL#base_dependencies_template"
  
  inherited_by_all:
    - "$ref: LOGIC_02_RETRIEVAL#base_dependencies_template"
    
  layer_behavior:
    default: "auto-inherit base_dependencies"
    override: "Only declare base_dependencies if overriding specific values"
    
  validation:
    check_explicit_declaration: false
    warn_on_redundant_declaration: true
    
  what_is_inherited:
    - "override_rules"
    - "immutable_paths"
    - "graceful_degradation_patterns"
    - "layer_degradation_templates"
    - "version_management"
    - "common_validation_checklist"

# ══════════════════════════════════════════════════════════════════════════════
# LAYER FILE MAP
# ══════════════════════════════════════════════════════════════════════════════

layers:
  CONFIG:
    files:
      - "CONFIG_00_INSTANCE.yaml"
    load_behavior: "always_first"
    
  DEMO:
    files:
      - "DEMO_01_SESSION.yaml"
    load_behavior: "always_read, apply_only_if_demo_mode_true"
    
  LOGIC:
    files:
      startup_critical:
        - "LOGIC_00_INDEX.yaml"
        - "LOGIC_01_META.yaml"
        - "LOGIC_02_RETRIEVAL.yaml"
        - "LOGIC_03_TAXONOMY.yaml"
        - "LOGIC_04_PLATFORM.yaml"
        - "LOGIC_05_RAG_MECHANICS.yaml"
        - "LOGIC_06_ORCHESTRATION.yaml"
        - "LOGIC_09_INTERFACE.yaml"
        - "LOGIC_10_TOOLS_CORE.yaml"
      on_demand:
        - "LOGIC_07_CAPABILITIES.yaml"
        - "LOGIC_08_QUALITY_GATES.yaml"
        - "LOGIC_11_TRACE.yaml"
        - "LOGIC_12_GOVERNANCE.yaml"
        - "LOGIC_13_INTEGRATION.yaml"
        - "LOGIC_14_PRICING.yaml"
        - "LOGIC_15_EFFORT_ESTIMATION.yaml"
        - "LOGIC_16_POLICY_CAPTURE.yaml"
        - "LOGIC_17_IMAGE_GENERATION.yaml"
        - "LOGIC_18_CASE_CAPTURE.yaml"
        
  OPS:
    files: null  # resolved at runtime
    base_required: "OPS_00_STANDARDS.yaml"
    
  ROLES:
    files: null  # resolved at runtime
    base_required:
      - "ROLE_00_BASE_TEMPLATE.yaml"
      - "ROLE_01_ORCHESTRATOR.yaml"
      
  PACKS:
    files: null  # resolved at runtime
    
  LIBRARIES:
    files: null  # resolved at runtime
    load_behavior: "scope-filtered by org_id/client_id"
    
  USE_CASES:
    files: null  # resolved at runtime
    base_required: "USE_CASE_00_BASE_TEMPLATE.yaml"
    
  WORKFLOWS:
    files: null  # resolved at runtime
    base_required: "WORKFLOW_00_BASE_TEMPLATE.yaml"
    
  ORG:
    files:
      - "ORG_01_FOUNDATION.yaml"
      - "ORG_02_BRAND_POSITIONING.yaml"
      - "ORG_03_AUDIENCE_MESSAGING.yaml"
      - "ORG_04_CHANNEL_PLAYBOOKS.yaml"
      - "ORG_05_DELIVERABLE_TEMPLATES.yaml"
      - "ORG_06_VISUAL_SYSTEM.yaml"
      - "ORG_07_MARKETING_COMPLIANCE.yaml"
      - "ORG_08_PRODUCTION_OPS.yaml"
      - "ORG_09_MEASUREMENT_SYSTEM.yaml"
      - "ORG_10_MARKET_LOCALIZATION.yaml"
    load_behavior: "always"
    
  CLIENT:
    files: "[dynamic - one per client]"
    pattern: "CLIENT_{client_id}.yaml"

# ══════════════════════════════════════════════════════════════════════════════
# OVERRIDE STRATEGY
# ══════════════════════════════════════════════════════════════════════════════

override_strategy: "last-wins"

override_reference: "$ref: LOGIC_02_RETRIEVAL#override_rules"